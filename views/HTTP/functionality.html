<!DOCTYPE html>
<html>
    <head>
        <% include ../partials/head.html %>
    </head>
    <body class = 'container'>
        <% include ../partials/nav.html %>
        <% include ../partials/echo.ejs %>
        <hr>
    </body>
    
    <div id = 'HTTP-3-1' class = 'col-md-6 caseModule' zendao-case = '2667'>
        <h4>HTTP-3-1<span class = 'caseID'></span>CSP发送违例报告的请求会被Sphinx保护</h4>
        <p>Describe: 访问标准保护后的测试场景; 访问高级保护后的测试场景</p>
        <p>Expect: 违例报告请求被cookie token/url token保护</p>
        <form method = 'get'>
            <div class="form-group">
                <label for = 'Content-Security-Policy'>Content-Security-Policy</label>
                <input type = 'text' name = 'Content-Security-Policy' value = "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; report-uri /HTTP/functionality?case=csp-reports" class="form-control" />
            </div>
            <div>
                <input type = 'hidden' name = 'case' value = 'HTTP-3-1' class = 'form-control'/>
            </div>
            <!--a class = 'btn btn-info' onclick = 'HTTP_3_1();'>Switch to #2668</a-->
            <input type = 'submit' value = 'Apply Response Header' class = 'btn btn-warning'/>
        </form>
    </div>
    <div id = 'HTTP-3-2' class = 'col-md-6 caseModule' zendao-case = '2668'>
        <h4>HTTP-3-2<span class = 'caseID'></span>CSP配置了report-uri，但无违例的情况</h4>
        <p>Describe: 访问标准保护后的测试场景; 访问高级保护后的测试场景</p>
        <p>Expect: Sphinx注入后应该没有违例报告</p>
        <form method = 'get'>
            <div class="form-group">
                <label for = 'Content-Security-Policy'>Content-Security-Policy</label>
                <input type = 'text' name = 'Content-Security-Policy'  value = "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; report-uri /HTTP/functionality?case=csp-reports" class="form-control" />
            </div>
            <div>
                <input type = 'hidden' name = 'case' value = 'HTTP-3-2' class = 'form-control'/>
            </div>
            <input type = 'submit' value = 'Apply Response Header' class = 'btn btn-success'/>
        </form>
    </div>

    <div id = 'HTTP-3-3' class = 'col-md-6 caseModule' zendao-case = '2553'>
        <h4>HTTP-3-3 <span class = 'caseID'></span>普通：GET = 301 + Location</h4>
        <p>Describe: 该状态码表示请求的资源已被分配了新的URI</p>
        <p>Expect: 1、能正常跳转; 2、该用例产生的请求无异常</p>
        <form name = 'HTTP-3-3' method = 'get' class = 'form-inline'>
            <div class="form-group">
                <label for = 'Method'>HTTP Verb</label>
                <input type = 'text' name = 'Method' placeholder = "GET" value = 'GET' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text' name = 'StatusCode' placeholder = "301" value = '301' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-3'/>
            </div>
            <input type = 'submit' value = '301 Moved Permanently ' class = 'btn btn-default'/>
        </form>
    </div>

    <div id = 'HTTP-3-4' class = 'col-md-6 caseModule' zendao-case = '2554'>
        <h4>HTTP-3-4 <span class = 'caseID'></span>普通：POST = 302 + Location</h4>
        <p>Describe: 临时性重定向，希望用户本次能使用新的URI访问。</p>
        <p>Note: 301、302标准禁止将POST方法改变成GET方法，但几乎所有的浏览器都会这么做，并删除请求报文主体，再次发送</p>
        <p>Expect: 1、能正常跳转; 2、该用例产生的请求无异常</p>
        <form name = 'HTTP-3-3' method = 'post' class = 'form-inline'>
            <div class="form-group">
                <label for = 'Method'>HTTP Verb</label>
                <input type = 'text' name = 'Method' placeholder = "POST" value = 'POST' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text'  name = 'StatusCode' placeholder = "302" value = '302' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-4'/>
            </div>
            <input type = 'submit' value = '302 Found' class = 'btn btn-default'/>
        </form>
    </div>

    <div id = 'HTTP-3-5' class = 'col-md-6 caseModule' zendao-case = '2562'>
        <h4>HTTP-3-5 <span class = 'caseID'></span>PUT = 303</h4>
        <p>Describe: 该状态码表示由于请求对应的资源存在着另一个URI，应使用GET方法定向获取请求的资源</p>
        <p>Expect: 1、能正常跳转; 2、该用例产生的请求无异常</p>
        <form name = 'HTTP-3-5' class = 'form-inline'>
            <div class = 'form-group'>
                <label class = 'col-form-label'>HTTP Method</label>
                <select name = 'httpMethod' class = 'form-control'>
                    <option value = 'PUT'>PUT</option>
                </select>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text'  name = 'StatusCode' placeholder = "303" value = '303' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-5'/>
            </div>
            <button class = 'ajax btn btn-default'>303 See Other</button>
        </form><br>
    </div>
    
    <script type = "text/javascript" src = "/HTTP/tSuite-3-functionality.js"></script>
    </body>
</html>